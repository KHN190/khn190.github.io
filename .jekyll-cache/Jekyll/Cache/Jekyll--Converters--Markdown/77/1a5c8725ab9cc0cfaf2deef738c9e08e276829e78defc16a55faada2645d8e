I"°<h2 id="lets-create-a-marble-shader-in-unity">Letâ€™s Create a Marble Shader in Unity!</h2>

<p>Back sometime, when I wandered in the cyber space I found a post about <a href="https://80.lv/articles/building-intricate-ice-shaders/">creating intricate ice in Unity</a>, and I immediately fell in love with the visual patterns. There is an incredibly beautiful image for you to have a feel:</p>

<p><img src="./assets/img/ice_shader.png" alt="" /></p>

<p>However when I bought the asset to see how it works, I was slightly unsatisfied because most of the patterns are baked in textures. The ices are not actually usable for arbitrary objects except for plane. And they are not transparent. I clearly want a toy with similar breath but has the following traits:</p>

<ol>
  <li>it can reflect lights</li>
  <li>it can refract other objects through it</li>
  <li>it has to be transparent (by axiom 2, right?)</li>
</ol>

<p>And after some research, I had this as my result - which is also the same you will have after the tutorial:</p>

<p><img src="./assets/img/marble.gif" alt="" /></p>

<h3 id="what-do-i-need-to-know-in-advance">What do I need to know in advance?</h3>

<p>I assume you should be familiar with programming with Unity, thatâ€™s all. <em>:)</em></p>

<p>I will explain everything you need to know in the tutorial and you will see it is so easy, in fact, to create the visual effects and the only boundary to use the rest is your imagination.</p>

<p>If you are more than curious with the content, hereâ€™s a list of quickie keywords:</p>

<ul>
  <li><strong>ray tracing</strong></li>
  <li><strong>compute shader</strong></li>
  <li><strong>fresnel effect</strong></li>
</ul>

<p>Donâ€™t be afraid of the terms if you donâ€™t know about them! They are really, really simple to understand. And in fact you donâ€™t need to understand everything about them.</p>

<h3 id="cut-the-crapslets-get-started">Cut the crapsâ€¦Letâ€™s get started!</h3>

<p>There is a premade Unity package to get you start. <strong><a href="./assets/marble-shader-starter.unitypackage">Download it here</a>.</strong></p>

<hr />

<h3 id="now-it-renders">Now it Rendersâ€¦</h3>

<p>If you havenâ€™t downloaded the Unity package, you must didnâ€™t read my tutorial carefully enough. :( Donâ€™t worry! I do that sometimes, too! The link is above, with text bolded, go download it, and open it in Unity. I reminded you again because, I love you.</p>

<p>Now, the project is setup pretty simple and should get you started. We have a scene with a camera, a C# script named <code class="highlighter-rouge">RayTrace.cs</code> attached to the camera, and a compute shader named <code class="highlighter-rouge">RayTrace.compute</code> attached to the C# script. If you click on â€œPlayâ€ button you should be able to see it does work - a pattern is rendered from compute shader to screen.</p>

<p>The C# script does one thing: it links the compute shader to Unity <code class="highlighter-rouge">MonoBehaviour</code> lifecycle and sends the output to screen. And the compute shader generates a pattern. Later we will send some data from Unity to shader and get it back, the data will be <em>computed</em> and returned and thatâ€™s why we call the shader as a compute API because it does more than graphics rendering!</p>

<blockquote>
  <p><strong>Tip 0</strong>. Go on, click â€œPlayâ€ and see what happens :)</p>
</blockquote>

<blockquote>
  <p><strong>Tip 1</strong>. In case you are very interested in compute shader I have also made a procgen grass shader, the wind swing movement of grass mesh vertices is computed inside shader and sent back to Unity. Itâ€™s open sourced! I released it on <a href="https://github.com/KHN190/UnityGrassShader">GitHub</a>.</p>
</blockquote>

<p><img src="https://raw.githubusercontent.com/KHN190/UnityGrassShader/master/img/grassSwing.gif" alt="" /></p>

<p><em>* Above is the result of my grass shader, all vertex movement is computed using compute shader.</em></p>

<p><a href="./">back</a></p>
:ET